import classes from './Projects.module.scss';
import {useState, useRef} from 'react';
import projectsData from './data/contentData';
import ScreenImage from '../../Components/ScreenImage/ScreenImage';
import ProjectCanvas from '../../Components/ProjectCanvas/ProjectCanvas';

function Projects(props) {
    const canvasCtn = useRef();
    // const svgPath = useRef();
    // const svg = useRef();
    const [otherProyect, setOtherProyect] = useState("image1");
    const [otherProyectFading, setOtherProyectFading] = useState(true);

    const otherProjectsMouseEnterHandler = (image) => {
        setOtherProyect(image);
        setOtherProyectFading(false);
    }


    const otherProjectsMouseLeaveHandler = (image) => {
        setOtherProyect(image)
        setOtherProyectFading(true);
    }

    // const activateSvg = () => {
    //     const path = svgPath.current;
    //     var length = path.getTotalLength();
    //     // Clear any previous transition
    //     path.style.transition = path.style.WebkitTransition = 'none';

    //     // Initial values
    //     path.style.strokeDasharray = length + ' ' + length;
    //     path.style.strokeDashoffset = length; // offset = total Lenght, completely not visible

    //     // Triggers a layout calculating the initial values, without it only the last values is picked up
    //     path.getBoundingClientRect();
        
    //     // Add transition
    //     path.style.transition = path.style.WebkitTransition = 'stroke-dashoffset 6s ease-in-out';

    //     // Final value
    //     path.style.strokeDashoffset = '0'; // offset = 0, completely visible

    //     svg.current.querySelectorAll("path").forEach(path => {
    //         var length = path.getTotalLength();
    //         // Clear any previous transition
    //         path.style.transition = path.style.WebkitTransition = 'none';

    //         // Initial values
    //         path.style.strokeDasharray = length + ' ' + length;
    //         path.style.strokeDashoffset = length; // offset = total Lenght, completely not visible

    //         // Triggers a layout calculating the initial values, without it only the last values is picked up
    //         path.getBoundingClientRect();
            
    //         // Add transition
    //         path.style.transition = path.style.WebkitTransition = `stroke-dashoffset ${path.dataset.duration}s ease-in-out`;
    //         path.style.transitionDelay = `${path.dataset.delay}s`;

    //         // Final value
    //         path.style.strokeDashoffset = '0'; // offset = 0, completely visible
    //     })
    // }

	return (
        <section className={classes.Proyects} id="projects" ref={props.refFx}>
            <div className={classes.content}>
                <h2>Proyectos</h2>
                {/* onepath svg */}
                {/* <svg width="799.9999999999999" height="600" xmlns="http://www.w3.org/2000/svg">
                    <path ref={svgPath} className={classes.svgPath} d="m-11,299c1,0 2.18601,-0.30746 4,1c1.14727,0.8269 3.01498,1.75565 5,2c4.09221,0.50378 7,3 16,3c14,0 32.0783,-1.64465 51,-6c8.03607,-1.84973 20.49923,-4.27124 31,-12c13.715,-10.09451 22.62042,-19.43799 28,-26c4.57176,-5.57664 7.47545,-13.86194 9,-20c2.93253,-11.80679 5,-22 6,-30c1,-8 2.90729,-17.03748 2,-28c-0.50171,-6.06204 -3,-10 -4,-10c-1,0 -6.72383,1.3443 -13,9c-6.85764,8.36497 -22.14613,31.91023 -35,53c-12.13859,19.91618 -17.84198,29.6684 -23,44c-6.00072,16.67307 -6.49903,29.95331 -7,38c-0.43496,6.98648 1.2935,12.88138 4,20c1.12381,2.95584 3.26365,8.86548 9,13c7.25597,5.2298 14.90098,7 20,7c10.19804,0 25.76019,-12.39316 36,-26c6.50407,-8.64273 16.14153,-16.21848 22,-26c5.06056,-8.44931 4,-14 4,-18c0,-1 0,0 0,1c0,9 0.01569,20.03442 -1,35c-1.50345,22.15265 -2.57204,33.07309 -5,46c-1.70187,9.0611 -3.53374,15.09662 -5,21c-2.28682,9.20709 -7.68999,17.3244 -15,24c-5.76727,5.26675 -12.90759,11.41479 -21,13c-6.93919,1.35928 -10.4588,1.30655 -11,0c-1.91341,-4.61938 2.67271,-11.25626 9,-19c7.61906,-9.32471 20.11115,-27.95425 34,-40c7.55453,-6.55203 16.93004,-9.46274 26,-16c11.4727,-8.26904 17.09979,-16.87137 21,-20c7.19164,-5.76892 10,-9 12,-10c2,-1 2,0 2,2c0,8 -1.44891,16.21454 0,21c1.04483,3.45084 3.04132,3.84723 7,5c3.03616,0.88412 8.15927,0.38934 11,-1c6.47784,-3.16821 13.67738,-9.34097 20,-15c4.77115,-4.27039 8,-5 11,-8c2,-2 3.70711,-2.29291 3,-3c-1.41422,-1.41422 -2.75365,0.51273 -9,11c-3.43272,5.76337 -5.4305,13.133 -4,17c0.7758,2.09717 3,3 5,3c3,0 7.9176,-2.38687 9,-5c0.76537,-1.84775 1,-5 1,-7c0,-2 -0.38269,-3.07611 0,-4c0.5412,-1.30655 2,-1 2,-2c0,-1 -0.70711,-2.29291 0,-3c0.70709,-0.70709 -2.63379,4.79498 16,19c9.60928,7.32541 19.57428,5.867 29,-1c8.5918,-6.25946 16.0723,-19.94629 22,-28c13.16162,-17.88217 21.52216,-26.83179 28,-30c2.84073,-1.38934 7.87869,-6.12131 10,-4c1.41422,1.41422 -1.33832,1.67276 -11,12c-7.26236,7.76263 -12.64288,12.61801 -16,19c-2.50705,4.76599 -2.68927,12.08026 -2,15c1.54123,6.52875 9.65979,10.09396 19,6c12.45734,-5.46027 21.4166,-14.62262 32,-36c13.19153,-26.64551 17.69745,-44.8855 19,-55c2.17508,-16.88991 0.50244,-25.9258 0,-31c-0.09854,-0.99513 -1,-1 -4,-1c-1,0 -2.82376,2.00259 -3,8c-0.50021,17.02203 -4.45065,35.96524 -6,59c-1.41092,20.97641 -3.34689,42.04779 -2,61c0.50125,7.05328 0.71613,7.91812 2,4c7.40149,-22.58801 19.01456,-41.57401 24,-49c5.92514,-8.82568 9.60645,-8.4613 11,-6c2.03146,3.58792 1.55786,9.14343 5,19c3.55093,10.16812 4.96854,19.41208 7,23c1.39355,2.4613 3.69345,1.5412 5,1c1.84775,-0.76538 3.36285,2.66934 13,0c5.61938,-1.55649 9.99982,-9.59692 12,-16c2.10837,-6.74942 1,-11 1,-15c0,-3 -0.18875,-4.58472 -1,-4c-2.56537,1.84903 -5.70575,10.63419 -6,23c-0.24261,10.19516 1.14316,15.4595 7,21c3.24881,3.07333 15.67578,2.86664 30,-9c15.8006,-13.08972 29.0885,-40.76358 34,-66c3.86346,-19.85129 6.12939,-32.63078 1,-50c-3.1665,-10.72255 -6,-16 -7,-16c-1,0 -1.53516,4.02867 -3,24c-2.27826,31.06137 -9.60638,54.45193 -4,89c3.54578,21.8501 13.76379,31.14557 20,41c1.92804,3.04672 5.62659,4.47095 10,-2c8.26776,-12.23294 12.99585,-28.80731 15,-60c1.7312,-26.94446 -1.50085,-55.0083 -2,-70c-0.50031,-15.02496 -3.25653,-21.203 -4,-20c-1.66254,2.68999 -4.55536,12.05045 -3,36c1.50317,23.14606 5.55194,40.94064 7,57c1.61902,17.95493 4.62354,28.24612 8,33c4.52264,6.36755 6.87854,8.49347 10,9c0.98706,0.16019 3.25671,0.72861 7,-1c7.80981,-3.60648 13.63892,-10.22882 21,-28c5.20508,-12.56613 4,-18 4,-21c0,-3 0,-2 0,-1c0,6 -1.33545,18.58212 3,31c2.65747,7.61169 9.51422,12.97385 22,15c12.83215,2.08237 28.26929,1.16949 50,-13c10.72723,-6.99469 11.71021,-11.04291 12,-12c6.26898,-20.70508 46.06378,-71.92659 76,-98c35.97534,-31.33328 78,-35 106,-35l37,13l27,18" id="svg_24" stroke="#000" fill="none"/>
                </svg> */}
                {/* multipath svg */}
                {/* <svg width="799.9999999999999" height="600" xmlns="http://www.w3.org/2000/svg" ref={svg}>
                    <path data-delay="0" data-duration="2" d="m39,223c2,0 5.20443,0.95454 12,-1c9.46513,-2.72237 12.95008,-5.49559 20,-11c7.26689,-5.67381 16.4149,-16.83995 20,-33c1.2995,-5.85759 3,-18 3,-26c0,-7 -0.5695,-12.133 -2,-16c-1.55159,-4.19435 -4,-5 -6,-5c-2,0 -5.2935,0.88138 -8,8c-2.24763,5.9117 -5.37132,17.91623 -7,26c-2.59779,12.89386 -4.46774,25.95416 -6,44c-1.44078,16.96832 -0.86324,34.11934 -3,49c-1.31042,9.12595 -2,25 -2,39c0,10 -0.49874,14.94672 -1,22c-0.42533,5.98489 0.70711,8.29291 0,9c-0.70711,0.70709 -1,-1 -1,-2c0,-8 1.05701,-21.98972 5,-44c3.04403,-16.99216 6.49741,-31.37953 12,-50c3.94727,-13.35736 8,-19 11,-21c3,-2 7,-2 8,-1c4,4 6.49938,7.9626 7,18c0.54795,10.98634 0.21772,21.96135 1,27c1.38926,8.94818 2.83772,14.83771 6,18c1.58114,1.58115 6.62001,2.32501 12,-1c8.42102,-5.20447 14.97449,-13.85715 23,-30c10.84071,-21.80548 14.77779,-41.78572 18,-55c2.64865,-10.86208 3.12128,-22.09039 2,-29c-0.50655,-3.12144 -3.12703,-3.32138 -6,-2c-5.2975,2.43651 -8.59738,7.64215 -12,14c-6.13416,11.46178 -9.99594,23.86484 -11,35c-0.71844,7.96768 1,20 5,26c2,3 7.35104,5.63863 11,4c10.98482,-4.93291 22.02858,-31.58844 32,-58c5.58467,-14.79228 15.87497,-46.62315 20,-72c3.70416,-22.7877 3.02788,-33.1116 1,-47c-1.33205,-9.12281 -3.17157,-16 -6,-16c-1.41422,0 -6.43741,6.36929 -12,21c-9.56891,25.16815 -12.07616,50.91731 -14,83c-2.27538,37.94499 -1.74469,70.28059 2,88c4.11978,19.49429 8.69136,30.44833 15,30c6.69133,-0.47552 13.37625,-4.81012 22,-25c12.67963,-29.68547 16.24014,-55.98491 17,-70c1.46271,-26.9789 1,-46 1,-67c0,-14 3,-23 0,-23c-1,0 -1.24997,7.9285 -8,32c-7.27,25.9258 -11.49968,40.97325 -12,55c-0.85551,23.98474 3.53374,53.17151 8,85c2.26213,16.12088 2.39569,25.84329 8,31c2.32706,2.1412 9.42598,-5.64642 16,-14c12.86874,-16.35223 24.25864,-40.69485 29,-63c2.7348,-12.86549 2,-18 2,-24c0,-2 0,-1 0,0c0,8 -1.40601,15.50432 1,20c2.00192,3.74063 6.08026,5.68925 9,5c2.17624,-0.51375 9.74969,-5.46408 16,-15c6.86877,-10.47951 10,-26 10,-31c0,-7 -1.39099,-12.76952 -5,-15c-2.69,-1.66251 -8,-2 -13,-2c-5,0 -7.70438,3.0146 -8,6c-0.50244,5.0742 -1.65482,12.17697 0,17c0.72568,2.11504 5.1994,4.39793 10,3c12.51843,-3.64537 20,-16 31,-27l7,-9" id="svg_1" stroke="#000" fill="none"/>
                    <path data-delay="2" data-duration="2" d="m228,349c8,-5 9.85114,-6.48532 12,-11c1.77199,-3.7229 2,-8 1,-8c-1,0 0.21657,3.13748 2,11c2.09856,9.2518 8.20778,33.26797 16,55c5.45279,15.20746 11.41885,22.25659 13,27c0.31622,0.94867 0.83499,0.98511 2,-11c0.8761,-9.01291 3.49985,-27.98215 4,-49c0.28546,-11.99661 0,-19 0,-23c0,-1 0.69254,-0.814 2,1c1.65381,2.29453 8.87146,8.29517 16,18c3.4519,4.6994 8.186,13.69254 10,15c1.14728,0.8269 4.54691,-0.84464 6,-7c3.24921,-13.76382 5,-31 5,-50c0,-7 2,-19 -1,-19c-2,0 0.40219,5.10614 3,18c1.62869,8.08377 3.16125,13.79626 7,17c1.71674,1.43277 3,1 4,1c2,0 6.29083,-3.50034 10,-15c3.13052,-9.70566 2,-14 2,-20c0,-1 0,-2 1,-2c1,0 1,1 2,3c2,4 4.37134,9.74673 7,14c1.17557,1.9021 2,4 4,4c1,0 2.95517,0.45084 4,-3c1.44891,-4.78546 1,-10 1,-17c0,-3 -1.77023,-6.02676 -2,-7c-0.51373,-2.17624 -1.22977,-0.97324 -1,0c1.0275,4.35251 3.85751,7.18491 9,11c4.32495,3.20856 8.10699,2.91901 12,2c2.17624,-0.51373 8.03687,-5.13998 11,-15c3.75253,-12.48672 2,-20 2,-21c0,-3 1.28384,-11.17697 -1,-23c-2.57971,-13.35458 -11.73227,-31.76707 -20,-44c-4.37344,-6.47093 -9.87857,-9.49345 -13,-10c-1.97418,-0.32036 -4.9725,2.64749 -6,7c-3.44629,14.59874 2.62869,32.83047 8,54c4.53482,17.87274 13.51715,50.246 30,82c13.60458,26.20908 16.02469,35.96616 27,44c5.10342,3.73566 7.08096,-1.10361 9,-14c1.35696,-9.11914 4.0192,-31.99924 5,-57c1.01996,-25.99924 -1.09604,-57.77931 -5,-80c-6.97549,-39.70319 -11.26431,-78.08311 -14,-99c-0.78885,-6.03139 -1,-7 -1,-6c0,6 0.79254,14.20668 6,41c5.69171,29.28488 17.07089,62.97012 28,89c5.03268,11.98633 8.31772,36.26767 18,45c3.32098,2.99518 7.95956,1.98621 9,-1c3.85101,-11.05304 9.49969,-27.97324 10,-42c0.28516,-7.99492 2,-14 0,-14c-1,0 -1,3 -1,7c0,4 1.54916,7.95517 5,9c0.95709,0.28979 4,0 7,0l2,-1l1,-1l1,-1" id="svg_4" stroke="#000" fill="none"/>
                    <path data-delay="4" data-duration="1.5" d="m139,534c2,1 4,3 6,3c4,0 9.96133,-2.24408 20,-16c11.12248,-15.24106 17.65648,-23.36819 20,-32c3.93892,-14.50809 1,-25 -3,-33c-1,-2 -4,-4 -6,-4c-1,0 -3.2442,0.43967 -5,6c-4.22638,13.38425 -1.24748,30.07059 4,48c3.82054,13.05389 15.8499,34.17987 29,45c9.88899,8.13684 16.96089,10.72742 23,10c7.56113,-0.91071 18.33244,-14.45227 26,-35c3.65005,-9.78149 2.50377,-21.90778 2,-26c-0.12218,-0.99249 0.85274,0.1731 2,1c3.62799,2.6149 8.67767,3.20648 17,11c8.78934,8.2309 14.74707,14.617 19,16c5.78461,1.88104 8.48169,-0.88 10,-8c1.4747,-6.91559 3.29144,-16.04184 2,-24c-0.81677,-5.03317 -1,-6 0,-6c3,0 4.29361,1.7265 8,6c3.276,3.77728 5.69345,6.4588 7,7c1.84775,0.76538 4.07611,1.38269 5,1c1.30655,-0.5412 2,-7 2,-14c0,-12 -3,-23 -3,-26c0,-2 0.5451,-1.76218 5,2c7.04379,5.94852 9.77173,11.38528 18,16c7.80115,4.37515 14.84976,5.29828 20,1c3.83875,-3.20374 9.95547,-12.36569 12,-22c1.24554,-5.86929 1.53073,-8.30447 0,-12c-1.0824,-2.61313 -5,-4 -9,-4c-2,0 -4.39417,2.01947 -4,6c0.50244,5.07422 5,16 9,24l6,11l4,6l1,3" id="svg_5" stroke="#000" fill="none"/>
                    <path data-delay="5.5" data-duration="1" d="m475,370c-7,3 -10.62723,8.23911 -21,24c-8.69241,13.20764 -11.19675,21.50842 -9,26c5.00937,10.24237 17,10 39,15c22,5 35.69495,11.14795 42,17c5.72449,5.3132 7.73871,11.25745 6,17c-1.04486,3.45084 -6.80804,13.37476 -15,16c-7.61838,2.44141 -13.21179,-0.87262 -18,-13c-5.97821,-15.14136 -3.11752,-31.05316 1,-40c9.72409,-21.12918 17.98694,-33.75711 19,-40c0.32037,-1.97418 1,-2 2,-2c2,0 5.28717,3.5665 10,7c8.5918,6.25946 16.20782,15.93066 24,18c0.96649,0.25665 1.05853,-1.00171 1,-2c-1.00171,-17.08792 -4,-24 -11,-40l-5,-10l-1,-3l0,-1" id="svg_6" stroke="#000" fill="none"/>
                    <path data-delay="6.5" data-duration="1" d="m595,321c-1,0 -3.49445,-0.26025 -7,7c-7.02454,14.5484 -13.34058,34.95187 -16,55c-3.44171,25.94522 -0.89221,42.01495 3,47c8.02399,10.27695 22.34283,13.59305 41,10c10.57599,-2.03674 28.52667,-13.96106 32,-26c4.44391,-15.40298 -0.03552,-27.50424 -3,-32c-3.89258,-5.90323 -11.27124,-7.92978 -18,-6c-9.06842,2.60077 -14,9 -22,15l-4,5l-2,1l0,1" id="svg_7" stroke="#000" fill="none"/>
                </svg> */}
                {projectsData.map(project=> {
                    return (
                    // separate component, fix "proyect" to "project"
                    <div className={classes.proyect} key={project.proyectName}>
                        <div className={classes.proyectContent}>
                            {project.screenPath ?
                                <ScreenImage screenPath={project.screenPath} proyectName={project.proyectName}/> :
                                null
                            }
                        </div>
                        <div className={classes.proyectTextContent}>
                            <h3 className={classes.proyectName}>{project.proyectName}</h3>
                            <p className={classes.proyectTech}>{project.proyectTech}</p>
                            <p className={classes.proyectDescription}>{project.proyectDescription}</p>
                            <div className={classes.proyectBtnCtn}>
                                <a href={project.githubLink} target='_blank' rel='noreferrer' className={classes.proyectBtn}>
                                    Ver código
                                </a>
                                {
                                    project.liveLink !== undefined ?
                                    <a href={project.liveLink} target='_blank' rel='noreferrer' className={classes.codeLink}>
                                        <span></span>
                                    </a> :
                                    ''
                                }
                            </div>
                        </div>
                    </div>
                    )
                })}
            </div>
            <div className={classes.otherProjects} ref={canvasCtn}>
                <ProjectCanvas otherProyect={otherProyect} otherProyectFading={otherProyectFading}/>
                <h3>Otros Proyectos</h3>
                <a href="/#top" target="_blank" rel="noreferrer" className={classes.otherProject} onMouseEnter={()=>otherProjectsMouseEnterHandler("image1")} onMouseLeave={()=>otherProjectsMouseLeaveHandler("image1")}>
                    <div>
                        <p>Resto Backend</p>
                        <small>NODE | EXPRESS | MySQL</small>
                    </div>
                    <div className={classes.codeLink}><span></span></div>
                </a>
                <a href="/#top" target="_blank" rel="noreferrer" className={classes.otherProject} onMouseEnter={()=>otherProjectsMouseEnterHandler("image2")} onMouseLeave={()=>otherProjectsMouseLeaveHandler("image2")}>
                    <div>
                        <p>Resto Backend</p>
                        <small>NODE | EXPRESS | MySQL</small>
                    </div>
                    <div className={classes.codeLink}><span></span></div>
                </a>
                <a href="/#top" target="_blank" rel="noreferrer" className={classes.otherProject} onMouseEnter={()=>otherProjectsMouseEnterHandler("image3")} onMouseLeave={()=>otherProjectsMouseLeaveHandler("image3")}>
                    <div>
                        <p>Resto Backend</p>
                        <small>NODE | EXPRESS | MySQL</small>
                    </div>
                    <div className={classes.codeLink}><span></span></div>
                </a>
            </div>
        </section>
	);
}

export default Projects;