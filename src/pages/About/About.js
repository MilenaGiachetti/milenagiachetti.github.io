import classes from './About.module.scss';
import CharacterCanvas from '../../Components/CharacterCanvas/CharacterCanvas';
import {useEffect, useRef} from 'react';

 function About(props) {
    const svg = useRef();

    const activateSvg = () => {
        [...svg.current.children].forEach(path => {
            var length = path.getTotalLength();
            path.style.transition = path.style.WebkitTransition = 'none';

            path.style.strokeDasharray = length + ' ' + length;
            path.style.strokeDashoffset = length;
            path.getBoundingClientRect();

            path.style.transition = path.style.WebkitTransition = `stroke-dashoffset ${path.dataset.duration}s ease-in-out`;
            path.style.transitionDelay = `${path.dataset.delay}s`;

            path.style.strokeDashoffset = '0';
        })
    }

    useEffect (()=> {
        if(props.animationActive) activateSvg();
    },[props.animationActive])

	return (
        <section className={classes.About} id="about" ref={props.refFx}>
            <h2>Acerca</h2>
            <p>Hola, Lorem ipsum dolor sit amet, <span className="circled">consectetur adipiscing</span> elit. Fusce eget massa quis enim vulputate facilisis faucibus eget odio. Vestibulum quis lobortis elit. Nunc id lacus ac urna porta quis eget massa. Praesent imperdiet scelerisque enim sed feugiat. Nullam nec leo leo. Maecenas elementum sapien metus, a ultrices nulla vehicula eu. Sed eu velit eu nisl vulputate vulputate ac ut sapien. Sed sit amet sapien at leo gravida ullamcorper. Nunc dictum, justo et feugiat varius, nulla leo lobortis magna, sed <span className="circled">venenatis</span> eros eros non eros. Nullam vestibulum odio nunc, at scelerisque elit suscipit a. Nullam a turpis quis massa tincidunt luctus. Etiam convallis at mauris non tempor. Quisque et ligula facilisis, tempor neque ac, feugiat ex. In fermentum at mi nec dictum. Aenean fermentum nisi et nibh venenatis, id vulputate est mollis. Vivamus et massa magna. </p>
            <div className={`${classes.svgCtn} ${props.animationActive ? '' : classes.hide}`}>
                <svg className={classes.svg} width="222" height="160" xmlns="http://www.w3.org/2000/svg" ref={svg}>
                    <path data-duration="0.5" data-delay="3" fill="none" stroke="#7f7f7f" id="svg_18" d="m-385.90906,117.04545c-4.54544,0 -6.51099,-2.2635 -31.81818,-4.54545c-18.10837,-1.63283 -27.50131,-0.88134 -45.45453,-4.54546c-16.21152,-3.30865 -20.245,-5.67324 -29.54547,-6.81818c-4.51138,-0.55537 -4.54544,-2.27273 -4.54544,-2.27273l-2.27274,0"/>
                    <path data-duration="0.2" data-delay="3.7" d="m2.00085,95.46353c0.87717,0 3.62314,0.44949 7.89462,-0.87717c6.37976,-1.98148 16.60507,-9.6954 21.9295,-16.66641c12.14157,-15.89633 21.49054,-32.42831 21.9295,-42.98184c0.401,-9.64066 0.84573,-17.8779 -2.63153,-25.43823c-2.13727,-4.64687 -4.58624,-8.02449 -7.01746,-7.01744c-1.14609,0.47472 -7.00693,8.48323 -8.77182,24.56105c-1.72287,15.69498 -2.29208,51.77164 -0.87717,85.96365c1.27145,30.7251 2.63153,38.59595 2.63153,43.85904l0,0.87717l-0.87717,0" id="svg_3" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.2" data-delay="3.9" d="m62.27942,54.59292c-0.70175,0 -1.72292,0.38538 -2.45614,2.80702c-0.61007,2.01493 -0.33841,4.73833 0.70175,6.31579c0.54633,0.82852 2.01927,2.50435 4.91228,2.45615c2.55407,-0.04256 4.24718,-1.73086 4.91228,-2.80702c1.48722,-2.40637 1.85172,-5.26994 1.75439,-5.96491c-0.3543,-2.52974 -1.65,-4.05737 -3.50877,-4.91228c-2.01613,-0.92728 -3.1579,-0.70176 -4.56141,-0.70176l-1.40351,0.35088l-0.70175,0.35088l-0.35088,0" id="svg_115" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.2" data-delay="4.1" d="m80.91385,17.67493c0,1.05263 0.52587,2.78832 0.70175,5.26316c0.27361,3.84994 0.56333,10.20086 1.40351,14.38597c1.20612,6.00793 1.73484,9.9622 2.80701,12.28071c0.53101,1.14828 0.54078,1.51108 0.35088,1.05264c-0.13428,-0.32417 -1.01977,-1.4398 -1.40351,-1.75439c-0.97836,-0.80207 -1.37115,-1.22675 -2.80702,-1.40351c-0.6965,-0.08574 -2.00108,-0.19898 -2.80701,1.05263c-1.62302,2.52056 -1.45712,5.27766 -1.05264,6.66667c0.62045,2.13065 2.45614,3.50878 3.85965,4.21053c0.70176,0.35088 1.05264,0.35088 1.75439,0.35088l1.05264,-0.35088l0.35088,-0.35088l0,-0.35088" id="svg_123" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.2" data-delay="4.3" d="m97.05935,49.1268c0,-0.35088 0.35088,-0.35088 0.70175,-0.70176c0.70177,-0.70176 1.05264,-1.05263 1.75439,-1.75439c0.35088,-0.35088 0.51186,-0.94506 0.70175,-1.40351c0.13428,-0.32417 0,-0.70175 0,-1.05263c0,-0.35088 -0.35088,-0.35088 -0.70175,-0.35088c-0.70175,0 -2.23816,1.34459 -2.80702,2.80702c-0.92604,2.38067 -0.70175,3.85965 -0.70175,5.26316c0,0.70176 0.49783,2.25224 1.05263,2.80702c0.55478,0.55479 1.40352,0.35088 2.10527,0.35088c0.70175,0 1.05263,0 1.4035,0l0.35088,-0.35088l0.35088,0" id="svg_124" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.2" data-delay="4.5" d="m112.1299,39.71502c0,-0.35088 -0.36026,-0.62114 -0.70177,-0.70176c-0.7636,-0.18026 -1.76376,-0.43149 -2.10526,-0.35088c-0.7636,0.18026 -0.70175,1.05264 -0.70175,1.40351c0,1.05264 0.83228,1.88952 2.10526,2.80702c1.20766,0.87043 3.06166,1.30676 4.56142,2.45614c1.39249,1.06717 2.3824,2.48366 2.80701,3.50877c0.30025,0.72487 0.64107,2.14606 0.35088,3.1579c-0.91255,3.1819 -4.5614,3.85965 -6.31578,3.85965l-0.70177,0l-0.35088,0" id="svg_125" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.2" data-delay="4.7" d="m101.54852,38.63831c-0.35088,0.35088 -0.51949,-0.0136 -0.35088,-1.05263c0.35547,-2.19049 2.35182,-4.40048 3.50877,-4.91228c1.32304,-0.58527 2.45615,-0.70176 2.80702,-0.70176l0.70175,0" id="svg_148" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.2" data-delay="4.9" d="m58.85842,91.41096c0,-0.35088 -0.2166,-0.37758 -0.35088,-0.70175c-0.1899,-0.45845 -1.08015,-1.32977 -2.10527,-1.75439c-0.72486,-0.30025 -1.7811,-0.48515 -2.10526,-0.35088c-1.37534,0.56969 -2.39073,3.15993 -2.45614,4.21054c-0.17578,2.82338 0,5.26315 0.70175,6.66667c0.35088,0.70175 0.94507,1.56448 1.40351,1.75438c0.64833,0.26855 1.06202,0.08061 1.40351,0c0.7636,-0.18027 1.40351,-1.4035 1.75439,-1.75438l0.67767,-0.70177" id="svg_150" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.2" data-delay="5.1" d="m66.29565,89.79074c0,0.35088 0,0.70175 0,2.10526c0,0.35089 0.12904,1.95226 1.40351,3.1579c0.91904,0.86942 1.34167,1.22325 2.10526,1.40352c1.36597,0.32246 1.75439,0 2.10527,0c1.05263,0 2.42913,-1.07115 3.15789,-2.10527c0.83337,-1.18256 0.52499,-1.72203 0.70176,-3.1579c0.17149,-1.39299 -0.06676,-3.11632 -0.70176,-4.21053c-0.78761,-1.35718 -1.30016,-2.22675 -2.10526,-2.80702c-0.63649,-0.45876 -1.75439,-0.35088 -2.45614,-0.35088c-1.05264,0 -1.45693,-0.26855 -2.10527,0c-0.45844,0.1899 -0.86274,0.94507 -1.05263,1.40352c-0.53709,1.29668 1.18166,3.35576 2.45614,4.5614c0.91904,0.8694 2.10527,1.4035 3.1579,1.75438l0.70176,0l0.70175,0l0.35088,0" id="svg_151" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.2" data-delay="5.3" d="m79.52925,89.68066c0,-0.70175 -0.37563,-2.13905 0,-4.21053c0.5349,-2.9498 2.10526,-5.26317 2.80701,-6.3158c0.70176,-1.05264 1.3609,-1.92754 2.45615,-2.10527c0.34634,-0.0562 1.08079,-0.24185 2.10526,0c0.7636,0.18027 1.69278,1.08698 2.10526,1.75439c0.92233,1.49237 2.22567,3.46529 2.80702,5.26315c0.44511,1.37654 0.70175,2.80702 1.05263,3.85965l0,0.35088l0,0.35088" id="svg_152" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.2" data-delay="5.5" d="m94.97818,77.30363c0.35088,-0.35088 1.05621,-0.26406 2.10526,-0.35088c2.12704,-0.17604 3.70146,-0.68602 4.91229,-1.05263c0.67165,-0.20335 1.69278,-0.73611 2.10526,-1.40351c0.18446,-0.29847 0.35088,-1.05264 0.35088,-2.45614c0,-0.35088 0,-1.05264 -0.35088,-1.05264c-0.35088,0 -0.97176,-0.21368 -1.75438,1.05264c-1.16667,1.88772 -1.3956,3.88068 -1.05263,6.66666c0.35353,2.87173 1.4035,3.85965 1.4035,4.21053l0,0.35089l0,0.35088" id="svg_156" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.2" data-delay="5.7" d="m116.71881,67.43091c-0.35088,0 -0.72845,-0.13428 -1.05263,0c-0.45844,0.1899 -0.82016,1.16141 -1.4035,2.10526c-0.52176,0.84422 -0.87634,1.37747 -1.05264,3.1579c-0.10373,1.04751 0,2.45614 0.70177,3.50877c0.70175,1.05263 0.92894,1.74474 2.45613,2.10526c0.68298,0.16122 1.30817,-0.07024 2.10527,-1.05264c1.19054,-1.46729 1.05263,-2.80701 1.05263,-4.5614c0,-2.10527 0.40283,-3.23802 0,-4.21053c-0.1899,-0.45844 -0.61943,-0.64833 -0.35088,0c0.1899,0.45844 2.80702,4.56141 3.50877,5.96492l1.4035,1.4035l0.35089,0.35088l0,0.35088" id="svg_157" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.2" data-delay="5.9" d="m130.9328,62.47046c0,-0.35088 -0.0267,-0.56747 -0.35089,-0.70175c-0.91689,-0.37979 -0.90729,-0.9073 -1.4035,-1.40351c-0.24811,-0.24811 -0.80452,-0.24811 -1.05263,0c-0.24811,0.24811 -1.19858,0.9688 -1.75439,2.10526c-0.48749,0.99675 -0.70175,1.75439 -0.70175,2.45615c0,1.75439 0.52383,3.59089 1.4035,5.26316c0.58897,1.11964 1.05264,1.75439 1.75439,2.10526c0.70175,0.35088 1.05263,0.35088 1.75438,0.35088l1.05264,-0.70175l0.35088,-0.70176" id="svg_158" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.2" data-delay="6.1" d="m138.6865,55.52515c0,0.70175 0.35088,2.45614 1.05264,3.85965c1.05264,2.10526 1.67126,4.68192 2.45613,6.66667c0.46524,1.17647 1.05264,1.75439 1.05264,2.10526l0.35088,0" id="svg_159" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.2" data-delay="6.3" d="m133.07247,60.78831c0,-0.70176 0.22844,-0.85364 2.80701,-2.80702c2.01685,-1.52785 4.91229,-3.1579 6.3158,-3.85965l3.50877,-1.40351l1.75439,-0.70175l1.05263,0" id="svg_160" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.2" data-delay="6.5" d="m155.29815,51.92006c-0.35089,0 -0.76703,0.243 -1.40352,0.70175c-0.8051,0.58028 -1.2272,1.72835 -1.4035,3.50877c-0.17287,1.74585 -0.53709,3.96649 0,5.26316c0.56967,1.37533 2.06264,1.92754 3.1579,2.10527c0.69269,0.11241 1.25035,0.10439 2.10526,-1.75439c0.46364,-1.00806 0.83456,-2.86334 0.35088,-4.91228c-0.36052,-1.52719 -0.76248,-2.05359 -1.05263,-2.45615c-0.45876,-0.63649 -0.35088,-1.05263 0,-0.70175c0.70175,0.70175 1.30016,1.52498 2.10527,2.10526c0.63649,0.45875 1.05263,0.70176 1.05263,1.05264l0.35088,0" id="svg_161" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.2" data-delay="6.7" d="m167.74741,58.25993c-0.35088,-0.70176 -1.28578,-2.26599 -2.10527,-3.50877c-1.04018,-1.57745 -0.70175,-2.10526 -0.70175,-3.1579c0,-0.70175 0.25056,-2.17954 1.05263,-3.1579c0.6292,-0.76749 1.40352,-1.40351 1.75439,-1.40351c0.70175,0 1.4035,0 1.75438,0l0.35088,0" id="svg_162" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.2" data-delay="6.9" d="m173.80864,43.24445c0.35088,0 0.23239,0.37408 0.70175,2.45614c0.56175,2.4919 2.10068,6.23058 2.45615,8.42106c0.16861,1.03904 0,1.40351 0,1.05264c0,-0.35088 -0.851,-1.40881 -0.70175,-3.50877c0.17587,-2.47484 0.35088,-3.85966 0.35088,-4.56141c0,-0.35088 -0.24811,-0.80452 0,-1.05264c0.24811,-0.24811 0.71114,-0.08061 1.05263,0c1.52719,0.36053 1.66541,1.46007 2.80702,3.1579c0.97893,1.45588 1.57411,2.3943 1.75438,3.1579c0.08061,0.34149 0,0.70175 0,0c0,-0.70175 0.175,-4.89359 0.35089,-7.36842c0.02487,-0.35 -0.06184,-0.87238 0.70175,-1.05264c0.34149,-0.08061 0.72845,-0.13428 1.05263,0c0.45844,0.1899 0.76985,0.66264 1.75439,2.45615c1.13264,2.06332 1.75438,3.50877 2.10526,4.21053l0,0.35088" id="svg_163" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.2" data-delay="7.1" d="m191.79877,44.83173c0.70175,0 3.4801,-1.44286 4.91228,-2.45614c1.03278,-0.7307 2.10526,-2.10527 2.80701,-2.80702c0.35089,-0.35088 0.35089,-0.70175 0.35089,-1.05263c0,-0.35088 -0.76703,-0.94476 -1.4035,-1.40351c-0.80511,-0.58028 -1.06171,-0.81417 -1.75439,-0.70176c-1.09525,0.17773 -2.45615,1.05264 -3.85965,2.45615c-0.35088,0.35088 -1.22675,1.37115 -1.4035,2.80701c-0.21436,1.74124 -0.32246,3.19544 0,4.56141c0.36052,1.52719 1.4035,2.45615 1.75438,2.45615l1.05263,0.35088l0.35089,0.35088" id="svg_164" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.2" data-delay="7.3" d="m89.96957,102.73537c-0.35088,0 -0.53619,0.04152 -0.70176,0.35088c-0.59695,1.1154 -2.63123,3.14153 -2.80701,5.96492c-0.13081,2.10118 0.34251,5.18596 1.75439,6.66667c0.87302,0.91559 1.42229,1.21385 2.10526,1.05263c0.7636,-0.18027 1.40351,-2.45615 1.40351,-3.50877c0,-1.75439 0,-3.50877 0,-5.26317c0,-0.70175 -0.16098,-1.29594 -0.35088,-1.75438c-0.13428,-0.32417 0.10277,-0.94986 0.35088,-0.70175c0.24811,0.24811 1.60101,1.97556 3.15789,4.5614c1.21408,2.01648 1.75439,3.50877 2.10527,3.85965l0,0.35088l0,0.35088" id="svg_168" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.2" data-delay="7.5" d="m99.71846,98.61084c-0.35088,0.70175 -0.92561,3.16585 -0.70175,6.31578c0.17587,2.47484 0.98689,3.93224 1.75438,4.56142c0.97836,0.80206 2.80702,1.4035 4.21054,1.4035c0.35088,0 1.62,-0.26213 2.10526,-1.75438c0.66002,-2.02969 0.8766,-3.487 1.05264,-5.61404c0.1447,-1.7484 0,-2.80702 0,-3.50877c0,-1.05263 -0.51187,-1.29593 -0.70177,-1.75439c-0.26855,-0.64833 -0.35088,-0.70175 -0.70175,-0.70175c-0.35088,0 -0.70175,0.35088 -0.70175,0.70175c0,0.70177 -0.10866,2.93121 1.05263,6.3158c0.50926,1.48425 1.53912,5.03069 3.1579,7.71931c1.55688,2.58585 2.25954,3.31096 4.21053,5.61403c1.28297,1.5145 2.45615,2.45615 2.80702,3.1579l0.70175,1.05263l0.35089,0.35088" id="svg_176" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.2" data-delay="7.7" d="m103.86708,117.09726c0.35088,0 0.72163,-0.32193 1.75438,-1.05263c1.43217,-1.01329 3.19876,-2.03329 3.85965,-2.45615c1.89249,-1.21088 3.77582,-2.60207 4.91229,-3.1579c1.99348,-0.97498 3.15788,-1.05263 3.85965,-1.05263l0,-0.35088" id="svg_177" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.2" data-delay="7.9" d="m115.48043,91.92009c-0.35088,0 -0.37941,3.16212 0,5.61403c0.32637,2.10921 0.70177,2.80702 2.10527,4.21053c1.05263,1.05264 2.10527,1.75439 2.45615,1.75439c0.35088,0 1.04749,0.16556 1.75438,-1.75439c0.73743,-2.00285 0.35088,-3.50877 0.35088,-5.61403c0,-1.40352 0,-2.10527 0,-2.45615l0,-0.35088" id="svg_179" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.2" data-delay="8.1" d="m131.46256,98.01915c0,-0.35088 -0.308,-0.70438 -0.35088,-1.05263c-0.17676,-1.43585 -0.27715,-2.83455 -0.70177,-3.85965c-0.30025,-0.72485 -0.35088,-1.05263 -0.35088,-1.4035l0,-0.35088l0,-0.35089" id="svg_182" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.2" data-delay="8.3" d="m128.65554,87.34799c0,-0.25281 0.0455,-0.47663 0.35088,-0.75843c1.25909,-1.16193 2.56035,-2.93612 3.50877,-3.53936c0.58818,-0.37412 0.70175,-0.50562 0.70175,-0.75843l0.35088,0" id="svg_188" stroke="#7f7f7f" fill="none"/>
                    <path data-duration="0.5" data-delay="8.5" transform="rotate(4.9275, 174.039, 103.669)" d="m129.18825,119.29884c0.35088,0 0.35805,-0.28032 0.70175,-0.35088c2.61763,-0.53729 7.97887,-4.41879 15.78949,-7.7193c7.98259,-3.37318 25.01883,-9.31752 42.80704,-13.68422c9.02211,-2.21477 12.5446,-2.69696 16.14037,-3.85966c1.37653,-0.4451 1.35837,-0.62318 0.70175,-1.05263c-2.29347,-1.49997 -8.01245,-3.85754 -11.22807,-4.21053c-5.92931,-0.65086 -8.77194,-0.35088 -8.77194,0c0,0.35088 0.60915,0.24982 3.1579,1.05263c8.2045,2.58426 17.85503,3.94537 24.56142,7.71931c5.93729,3.34113 6.23956,5.04845 5.61404,5.9649c-1.54489,2.26347 -7.20282,4.91975 -12.63159,8.07019c-2.1884,1.26997 -4.5614,2.10526 -4.91228,2.45613l-0.35088,0l-0.35088,0" id="svg_211" stroke="#7f7f7f" fill="none"/>
                </svg>
                { props.animationActive ? <CharacterCanvas/> : null}
            </div>
        </section>
	);
}

export default About;